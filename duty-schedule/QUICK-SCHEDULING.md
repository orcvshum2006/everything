# 快速排班功能使用指南

## 功能概述

快速排班功能让您可以更便捷地在日历上进行排班操作，支持多选日期然后批量确认的方式，大大提高排班效率。

## 新增功能

### 1. 快速排班模式
- **入口**: 在日历工具栏中点击 "✨ 快速排班" 按钮
- **状态**: 进入快速排班模式后，界面会显示人员选择器和操作说明
- **退出**: 点击 "退出" 按钮返回普通模式

### 2. 人员选择器
- 在快速排班模式下，可以从下拉菜单中选择要排班的人员
- 只显示当前激活的人员
- 选择人员后，日历上的可排班日期会高亮显示

### 3. 交互方式

#### 多选日期
- 选择人员后，点击日期进行选择（可多选）
- 再次点击已选中的日期可以取消选择
- 只能对今天和未来的日期进行排班
- 过去的日期会被自动过滤

#### 批量确认
- 选择完所有需要排班的日期后，点击 "确认排班" 按钮
- 系统会批量为选中的日期分配选中的人员
- 确认后自动清空选择，可以继续进行下一轮排班

## 界面变化

### 视觉指示
- **快速排班按钮**: 紫色渐变按钮，醒目易识别
- **可排班日期**: 浅紫色背景，紫色边框高亮
- **已选中日期**: 深紫色背景，表示已选择待排班
- **悬停效果**: 鼠标悬停时日期会放大并加深颜色
- **操作面板**: 虚线边框的紫色面板，包含人员选择和操作按钮

### 操作按钮
- **确认排班**: 绿色按钮，显示选中的日期数量
- **清空选择**: 黄色按钮，清空所有已选择的日期
- **退出**: 红色按钮，退出快速排班模式

### 模式切换
- 快速排班模式与换班模式互斥
- 进入快速排班模式时，换班功能自动禁用
- 在预览模式下，快速排班功能会被禁用

## 操作说明

### 使用步骤
1. 在"已排班"模式下点击"✨ 快速排班"按钮
2. 从下拉菜单中选择要排班的人员
3. 点击需要排班的日期进行多选
   - 已选中的日期会显示深紫色背景
   - 再次点击可以取消选择
4. 选择完成后点击"确认排班"按钮批量执行
5. 可以选择其他人员继续排班，或点击"退出"返回普通模式

### 功能限制
- 只能在"已排班"模式下使用（预览模式下禁用）
- 只能对今天和未来的日期进行操作
- 需要至少有一个激活的人员才能使用
- 与换班模式互斥，不能同时启用
- 必须先选择人员才能选择日期

## 响应式设计

### 移动端适配
- 在移动设备上，所有按钮和文字会垂直排列
- 字体大小和间距自动调整适应小屏幕
- 触摸操作同样有效

### 样式特点
- 保持与现有界面风格一致
- 使用紫色主题区分快速排班功能
- 清晰的视觉反馈和状态指示
- 不同状态的日期用不同颜色区分

## 技术实现

### 状态管理
- 新增 `SchedulingMode` 类型：`'normal' | 'quickAssign'`
- 新增状态变量：
  - `schedulingMode`: 当前排班模式
  - `selectedPersonForQuickAssign`: 选中的人员ID
  - `selectedDatesForQuickAssign`: 选中的日期数组

### 事件处理
- `handleDateClick`: 增加快速排班模式的日期选择逻辑
- `confirmQuickAssign`: 批量执行排班操作
- `clearQuickAssignSelection`: 清空选择
- 模式切换时自动重置相关状态

### 样式系统
- 新增 `.quickAssign*` 相关样式类
- `.quickAssignSelected`: 已选中日期的样式
- 保持现有样式结构不变
- 添加响应式支持

## 注意事项

1. **数据一致性**: 确认排班时会调用 `onAssignDuty` 回调，确保数据同步
2. **用户体验**: 提供清晰的视觉反馈和操作提示
3. **兼容性**: 与现有功能完全兼容，不影响原有操作流程
4. **操作流程**: 必须先选择人员再选择日期，然后确认执行

## 使用场景

### 适用情况
- 需要为同一人员批量排班多个日期
- 临时调整大量排班安排
- 新增排班计划的快速录入

### 操作技巧
- 可以多次使用确认排班，无需退出模式
- 使用清空选择快速重新开始
- 选择人员后界面会显示当前选中的日期数量

## 未来扩展

可以考虑的增强功能：
- 支持键盘快捷键操作
- 添加撤销/重做功能
- 支持范围选择（Shift+点击）
- 添加排班模板功能
- 支持复制其他人员的排班安排 